require 'rspec'

RSpec.describe 'test' do
  it 'test with "3 4\n5 1\n10 1\n8 0\n1 10\n4 5\n6 7\n8 9\n"' do
    io = IO.popen("ruby abc155/F.rb", "w+")
    io.puts("3 4\n5 1\n10 1\n8 0\n1 10\n4 5\n6 7\n8 9\n")
    io.close_write
    expect(io.readlines.join).to eq("2\n1 4\n")
  end

  it 'test with "4 2\n2 0\n3 1\n5 1\n7 0\n1 4\n4 7\n"' do
    io = IO.popen("ruby abc155/F.rb", "w+")
    io.puts("4 2\n2 0\n3 1\n5 1\n7 0\n1 4\n4 7\n")
    io.close_write
    expect(io.readlines.join).to eq("-1\n")
  end

  it 'test with "3 2\n5 0\n10 0\n8 0\n6 9\n66 99\n"' do
    io = IO.popen("ruby abc155/F.rb", "w+")
    io.puts("3 2\n5 0\n10 0\n8 0\n6 9\n66 99\n")
    io.close_write
    expect(io.readlines.join).to eq("0\n\n")
  end

  it 'test with "12 20\n536130100 1\n150049660 1\n79245447 1\n132551741 0\n89484841 1\n328129089 0\n623467741 0\n248785745 0\n421631475 0\n498966877 0\n43768791 1\n112237273 0\n21499042 142460201\n58176487 384985131\n88563042 144788076\n120198276 497115965\n134867387 563350571\n211946499 458996604\n233934566 297258009\n335674184 555985828\n414601661 520203502\n101135608 501051309\n90972258 300372385\n255474956 630621190\n436210625 517850028\n145652401 192476406\n377607297 520655694\n244404406 304034433\n112237273 359737255\n392593015 463983307\n150586788 504362212\n54772353 83124235\n"' do
    io = IO.popen("ruby abc155/F.rb", "w+")
    io.puts("12 20\n536130100 1\n150049660 1\n79245447 1\n132551741 0\n89484841 1\n328129089 0\n623467741 0\n248785745 0\n421631475 0\n498966877 0\n43768791 1\n112237273 0\n21499042 142460201\n58176487 384985131\n88563042 144788076\n120198276 497115965\n134867387 563350571\n211946499 458996604\n233934566 297258009\n335674184 555985828\n414601661 520203502\n101135608 501051309\n90972258 300372385\n255474956 630621190\n436210625 517850028\n145652401 192476406\n377607297 520655694\n244404406 304034433\n112237273 359737255\n392593015 463983307\n150586788 504362212\n54772353 83124235\n")
    io.close_write
    expect(io.readlines.join).to eq("5\n1 7 8 9 11\n")
  end

end
